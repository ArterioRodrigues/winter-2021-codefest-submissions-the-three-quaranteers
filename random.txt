import React from 'react';
import { render } from 'react-dom';
import { Text, View, StyleSheet } from 'react-native';
import MapView from './node_modules/react-native-maps';
import Permissions from 'expo';

export default class WorldApp extends React.Component
{
  state = {
      latitude: null,
      longitude: null
  }

  async componentDidMount(){
    const {status} = await Permissions.getAsync(Permissions.LOCATION)

    if( status !== 'granted'){
      const response = await Permissions.askAsync(Permissions.LOCATION)
    }
    navigator.geolocation.getCurrentPosition(
        ({ coords: {latitude, longitude}}) => this.setState({latitude, longitude}, () => console.log('State:', this.state)),
        (error) => console.log('Error: ', error)
    )
  }
  
  render(){
    const {latitude,longitude} = this.state;
    
    if(latitude)
    {
      return(
        <MapView 
        style = {{flex : 1}} 
        initialRegion = 
        {{ 
          latitude,
          longitude,
          latitudeDelta: 0.0922, 
          longitudeDelta: 0.0421,
        }} />
      );
    }

    return(
      <View style = {styles.container}>
        <Text> We need your permission! </Text>
      </View>
    )
  }
  
}

const styles = StyleSheet.create({
  container:
  {
    flex: 1,
    padding: 24,
    justifyContent: 'center', 
    alignItems:'center'
  }
});
  
 render(){
    latitude = this.setState.latitude;
    longitude = this.setState.longitude;
    
    if(latitude)
    {
      return(
        <MapView 
        style = {{flex : 1}} 
        initialRegion = 
        {{ 
          latitude,
          longitude,
          latitudeDelta: 0.0922, 
          longitudeDelta: 0.0421,
        }} />
      );
    }

    return(
      <View style = {styles.container}>
        <Text> We need your permission! </Text>
      </View>
    )
  }

  import React from 'react';
import { render } from 'react-dom';
import { Text, View, StyleSheet, TouchableOpacity, PermissionsAndroid } from 'react-native';
import MapView from './node_modules/react-native-maps';
import * as Permissions from 'expo-permissions';
import * as Constants from 'expo-permissions';
import * as Location from 'expo-permissions';

export default class WorldApp extends React.Component
{
  state = {
    location: null,
    errorMessage: null
  };

  findCurrentLocation = () => {
    navigator.geolocation.getCurrentPosition(
      position => {
        const latitude = JSON.stringify(position.coords.latitude);
        const longitude = JSON.stringify(position.coords.longitude);

        this.setState({
          latitude,
          longitude
        });
      },
      {enableHighAccuracy: true, timeout: 2000, maximumAge: 1000}
    );
  };

  findCurrentLocationAsync = async () => {
    let {status} = await PermissionsAndroid.request(PermissionsAndroid.PERMISSIONS.LOCATION);

    if(status === PermissionsAndroid.RESULTS.GRANTED)
    {
      let location = await Location.getCurrentPosition({ enableHighAccuracy: true});
      this.setState({location});
    }
    else
    {
      this.setState({
        errorMessage:"Permission to access location was denied"
      });
    }
  };

  render(){
    
    let text = '';
    if(this.state.errorMessage)
    {
      text = this.state.errorMessage;
    }
    else if(this.state.location)
    {
      text = JSON.stringify(this.state.location);
    }
    
    return(
      <View style = {styles.container}>
        <TouchableOpacity onPress = {this.findCurrentLocationAsync}>
          <Text>What up fuckersss </Text>
          <Text> {text}</Text>
        </TouchableOpacity>
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container:
  {
    flex: 1,
    padding: 24,
    justifyContent: 'center', 
    alignItems:'center'
  }
});
  
  <MapView 
      style = {{flex : 1}} 
      initialRegion = 
      {{ 
        latitude: 0,
        longitude: 0,
        latitudeDelta: 0.0922, 
        longitudeDelta: 0.0421,
      }} />